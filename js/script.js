const linkToBbwSh = '<a href="https://www.bbw-suedhessen.de" target="_blank">Berufsbildungswerk Südhessen gGmbH</a>';

const translations = {
    de: {
        title: "Julian Hölz’ Portfolio",
        paragraph1: "Willkommen auf meiner Portfolio-Seite! Hier stelle ich eine Auswahl meiner bisherigen Softwareentwicklungsprojekte sowie mich selbst vor.",
        paragraph2: "Du kannst die Projektkacheln anklicken, um auf eine Seite mit allen wichtigen Details zu gelangen.",
        projectsHeading: "Meine Projekte",
        aboutMeHeading: "Über mich",
        qualificationsHeading: "Qualifikationen",
        contactHeading: "Kontakt",
        ptAsteroids: { // pt = project tile
            heading: "Asteroids",
            description: "Ein vollumfänglicher Klon des Arcade-Spiels Asteroids."
        },
        ptGameOfLife: {
            heading: "Spiel des Lebens",
            description: "Conways Spiel des Lebens direkt im Browser."
        },
        ptWandaDescription: "Eine Webanwendung für digitale Ausbildungsnachweise.",
        ptMathGame: {
            heading: "Rechenspiel für den Aktionstag",
            description: "Ein Rechenspiel für den Aktionstag des bbw Südhessen 2024."
        },
        ptMastermind: {
            heading: "Mastermind in der Konsole",
            description: "Das beliebte Spiel Mastermind in der Konsole."
        },
        ptPfCalculator: {
            heading: "Primfaktorzerlegungsrechner",
            description: "Eine einfache Webanwendung zur Primfaktorzerlegung einer Zahl."
        },
        aboutMeParagraph: "Hier steht etwas über mich.",
        aboutMe: {
            heading1: "Ausbildung",
            heading2: "Freizeit",
            paragraph1: "Hi, ich bin Julian Hölz und ich entwickle für mein Leben gern Software.",
            paragraph2BeforeLink: "In meiner Ausbildung zum Fachinformatiker: Fachrichtung Anwendungsentwicklung im ",
            paragraph2AfterLink: " lerne ich jeden Tag Neues zum Thema Softwareentwicklung.",
            paragraph3: "In meiner Freizeit entwickle ich Websites, Spiele, Konsolenanwendungen und mehr. Meistens schreibe ich in Python. Für das Hochgefühl, ein schwieriges Problem gelöst zu haben, nehme ich einige Anstrengung in Kauf.",
            paragraph4: "Warum du diese Seite auf Esperanto stellen kannst, fragst du dich vielleicht? Nun, diese Sprache habe ich aus persönlichem Interesse privat gelernt und spreche sie heute auf einem guten Niveau."
        },
        qualifications: {
            itSkills: "EDV-Kenntnisse",
            programmingLanguages: "Programmiersprachen",
            operatingSystems: "Betriebssysteme",
            languages: "Sprachen",
            german: "Deutsch",
            nativeLanguage: "Muttersprache",
            english: "Englisch",
            certificate: "Zertifikat",
            goodKnowledge: "Gute Kenntnisse",
            codeGolfProfile: "Mein Code.Golf-Profil"
        },
        contact: {
            paragraph1: "Du hast Fragen oder bist an einer Zusammenarbeit interessiert?",
            paragraph2: "Schreib mir einfach eine Mail. Ich freue mich von dir zu hören und antworte zuverlässig!",
            mailButton: "Mail an mich"
        }
    },
    en: {
        title: "Julian Hölz’s Portfolio",
        paragraph1: "Welcome to my portfolio page! Here, I present a selection of my previous software development projects as well as introduce myself.",
        paragraph2: "You can click on the project tiles to access a page with all the important details.",
        projectsHeading: "My Projects",
        aboutMeHeading: "About Me",
        qualificationsHeading: "Qualifications",
        contactHeading: "Contact",
        ptAsteroids: {
            heading: "Asteroids",
            description: "A full-scale clone of the arcade game Asteroids."
        },
        ptGameOfLife: {
            heading: "Game of Life",
            description: "Conway’s Game of Life directly in the browser."
        },
        ptWandaDescription: "A German web application for digital training records.",
        ptMathGame: {
            heading: "Maths Game for the Action Day",
            description: "A maths game for the action day at bbw Südhessen 2024."
        },
        ptMastermind: {
            heading: "Mastermind in the Console",
            description: "The popular game Mastermind in the console."
        },
        ptPfCalculator: {
            heading: "Prime Factorisation Calculator",
            description: "A simple web application for the prime factorisation of a number."
        },
        aboutMeParagraph: "Here is something about me.",
        aboutMe: {
            heading1: "Education",
            heading2: "Free Time",
            paragraph1: "Hi, I’m Julian Hölz and I love developing software.",
            paragraph2BeforeLink: "During my training as an IT specialist in application development at ",
            paragraph2AfterLink: ", I learn something new about software development every day.",
            paragraph3: "In my free time, I develop websites, games, console applications, and more. I mostly code in Python. For the thrill of solving a tough problem, I’m willing to put in some serious effort.",
            paragraph4: "Wondering why you can switch this page to Esperanto? Well, I learned this language privately out of personal interest, and today I speak it at a good level."
        },
        qualifications: {
            itSkills: "IT Skills",
            programmingLanguages: "Programming Languages",
            operatingSystems: "Operating Systems",
            languages: "Languages",
            german: "German",
            nativeLanguage: "Native language",
            english: "English",
            certificate: "Certificate",
            goodKnowledge: "Good knowledge",
            codeGolfProfile: "My Code.Golf profile"
        },
        contact: {
            paragraph1: "Do you have any questions or are you interested in a collaboration?",
            paragraph2: "Just send me an email. I look forward to hearing from you and will respond reliably!",
            mailButton: "Email me"
        }
    },
    eo: {
        title: "La foliujo de Julian Hölz",
        paragraph1: "Bonvenon al mia foliuja paĝo! Ĉi tie mi prezentas elekton el miaj ĝisnunaj programdisvolvaj projektoj kaj min mem.",
        paragraph2: "Vi povas alklaki la projektajn kahelojn por aliri paĝon kun ĉiuj gravaj detaloj.",
        projectsHeading: "Miaj projektoj",
        aboutMeHeading: "Pri mi",
        qualificationsHeading: "Kvalifikoj",
        contactHeading: "Kontakto",
        ptAsteroids: {
            heading: "Asteroids",
            description: "Plenampleksa kopio de la videoludeja ludo Asteroids."
        },
        ptGameOfLife: {
            heading: "La ludo de la vivo",
            description: "La ludo de la vivo far Conway rekte en la retumilo."
        },
        ptWandaDescription: "Germana retaplikaĵo por ciferecaj staĝoraportoj.",
        ptMathGame: {
            heading: "Kalkulada ludo por la agotago",
            description: "Kalkulada ludo por la agotago de la bbw Südhessen 2024."
        },
        ptMastermind: {
            heading: "Mastermind en la terminalo",
            description: "La populara ludo Mastermind en la terminalo."
        },
        ptPfCalculator: {
            heading: "Primfaktoriga kalkulilo",
            description: "Simpla retaplikaĵo por la primfaktorigo de nombro."
        },
        aboutMeParagraph: "Jen io pri mi.",
        aboutMe: {
            heading1: "Staĝo",
            heading2: "Libertempo",
            paragraph1: "Saluton, mi estas Julian Hölz kaj mi pasie disvolvas programarojn.",
            paragraph2BeforeLink: "Dum mia staĝo al fakulo pri informadiko, specialiĝanta en aplikaĵdisvolvado, ĉe la ",
            paragraph2AfterLink: ", mi lernas novajn aferojn pri programara disvolvado ĉiutage.",
            paragraph3: "En mia libertempo mi disvolvas retejojn, ludojn, terminalaplikaĵojn kaj pli. Plej ofte mi verkas en Python. Por la ĝojo solvi malfacilan problemon, mi akceptas iom da penoj.",
            paragraph4: "Ĉu vi scivolas, kial vi povas elekti Esperanton por ĉi tiu paĝo? Nu, mi lernis tiun ĉi lingvon private pro persona intereso, kaj hodiaŭ mi parolas ĝin sur alta nivelo."
        },
        qualifications: {
            itSkills: "Komputilaj kapabloj",
            programmingLanguages: "Programlingvoj",
            operatingSystems: "Mastrumaj sistemoj",
            languages: "Lingvoj",
            german: "Germana",
            nativeLanguage: "Denaska lingvo",
            english: "Angla",
            certificate: "Atestilo",
            goodKnowledge: "Bonaj scioj",
            codeGolfProfile: "Mia Code.Golf-konto"
        },
        contact: {
            paragraph1: "Ĉu vi havas demandojn aŭ interesas vin kunlaboro? Simple sendu al mi retpoŝtmesaĝon.",
            paragraph2: "Mi ĝojas aŭdi de vi kaj respondos fidinde!",
            mailButton: "Retpoŝtmesaĝo al mi"
        }
    }
}

const languageToButtonIndex = {
    "de": 0,
    "en": 1,
    "eo": 2
}

const sections = ["projects", "about-me", "qualifications", "contact"];

function setLanguageOnLoad() {
    const urlParams = new URLSearchParams(location.search);
    let language = urlParams.get("lang");
    if (!language || !Object.keys(translations).find(key => key.includes(language))) {
        language = "de";
    }
    setLanguage(language, false);
    document.documentElement.lang = language;
}

function setLanguage(language, addLangToUrl) {
    const index = languageToButtonIndex[language];
    const langs = document.getElementsByClassName("language");
    for (const lang of langs) {
        lang.classList.remove("active");
    }
    langs[index].classList.add("active");
    applyLanguage(language);
    if (addLangToUrl) {
        addToUrl("lang", language);
    }
}

function applyLanguage(language) {
    const translation = translations[language];
    const aboutMeParagraph2HTML = translation.aboutMe.paragraph2BeforeLink + linkToBbwSh + translation.aboutMe.paragraph2AfterLink;
    document.title = translation.title;
    document.getElementById("title").textContent = translation.title;
    document.getElementById("paragraph-1").textContent = translation.paragraph1;
    document.getElementById("paragraph-2").textContent = translation.paragraph2;
    document.getElementById("tab-button-projects").textContent = translation.projectsHeading;
    document.getElementById("tab-button-about-me").textContent = translation.aboutMeHeading;
    document.getElementById("tab-button-qualifications").textContent = translation.qualificationsHeading;
    document.getElementById("tab-button-contact").textContent = translation.contactHeading;
    document.getElementById("heading-projects").textContent = translation.projectsHeading;
    document.getElementById("heading-about-me").textContent = translation.aboutMeHeading;
    document.getElementById("heading-qualifications").textContent = translation.qualificationsHeading;
    document.getElementById("heading-contact").textContent = translation.contactHeading;
    document.getElementById("project-tile-asteroids-heading").textContent = translation.ptAsteroids.heading;
    document.getElementById("project-tile-asteroids-description").textContent = translation.ptAsteroids.description;
    document.getElementById("project-tile-game-of-life-heading").textContent = translation.ptGameOfLife.heading;
    document.getElementById("project-tile-game-of-life-description").textContent = translation.ptGameOfLife.description;
    document.getElementById("project-tile-wanda-description").textContent = translation.ptWandaDescription;
    document.getElementById("project-tile-math-game-heading").textContent = translation.ptMathGame.heading;
    document.getElementById("project-tile-math-game-description").textContent = translation.ptMathGame.description;
    document.getElementById("project-tile-mastermind-heading").textContent = translation.ptMastermind.heading;
    document.getElementById("project-tile-mastermind-description").textContent = translation.ptMastermind.description;
    document.getElementById("project-tile-pf-calculator-heading").textContent = translation.ptPfCalculator.heading;
    document.getElementById("project-tile-pf-calculator-description").textContent = translation.ptPfCalculator.description;
    document.getElementById("about-me-heading-1").textContent = translation.aboutMe.heading1;
    document.getElementById("about-me-heading-2").textContent = translation.aboutMe.heading2;
    document.getElementById("about-me-paragraph-1").textContent = translation.aboutMe.paragraph1;
    document.getElementById("about-me-paragraph-2").innerHTML = aboutMeParagraph2HTML;
    document.getElementById("about-me-paragraph-3").textContent = translation.aboutMe.paragraph3;
    document.getElementById("about-me-paragraph-4").textContent = translation.aboutMe.paragraph4;
    document.getElementById("qualifications-heading-it-skills").textContent = translation.qualifications.itSkills;
    document.getElementById("qualifications-heading-programming-languages").textContent = translation.qualifications.programmingLanguages;
    document.getElementById("qualifications-heading-operating-systems").textContent = translation.qualifications.operatingSystems;
    document.getElementById("qualifications-heading-languages").textContent = translation.qualifications.languages;
    document.getElementById("qualifications-heading-german").textContent = translation.qualifications.german;
    document.getElementById("qualifications-paragraph-native-language").textContent = translation.qualifications.nativeLanguage;
    document.getElementById("qualifications-heading-english").textContent = translation.qualifications.english;
    document.getElementById("qualifications-anker-certificate").textContent = translation.qualifications.certificate;
    document.getElementById("qualifications-paragraph-good-knowledge").textContent = translation.qualifications.goodKnowledge;
    document.getElementById("qualifications-paragraph-code-golf").textContent = translation.qualifications.codeGolfProfile;
    document.getElementById("contact-paragraph-1").textContent = translation.contact.paragraph1;
    document.getElementById("contact-paragraph-2").textContent = translation.contact.paragraph2;
    document.getElementById("mail-button").textContent = translation.contact.mailButton;
}

function openSectionOnLoad() {
    const urlParams = new URLSearchParams(location.search);
    let section = urlParams.get("section");
    if (!section || !sections.includes(section)) {
        section = "projects";
    }
    openSection(section, false);
}

function openSection(section, addSectionToUrl) {
    // alle Reiterschaltflächen inaktiv und die angeklickte aktiv setzen:
    const tab_buttons = document.getElementById("tab-button-container").children;
    for (const tab_button of tab_buttons) {
        tab_button.classList.remove("active");
    }
    document.getElementById("tab-button-" + section).classList.add("active");

    // alle Sektionen ausblenden und die einzublendende einblenden:
    const sections = document.getElementsByTagName("section");
    for (const section of sections) {
        section.style.display = "none";
    }
    document.getElementById("section-" + section).style.display = "block";

    if (addSectionToUrl) {
        addToUrl("section", section);
    }
}

function addToUrl(key, value) {
    const currentUrl = new URL(location.href);
    currentUrl.searchParams.set(key, value);
    history.replaceState({}, "", currentUrl);
}

function openPage(href) {
    const urlParams = new URLSearchParams(location.search);
    const language = urlParams.get("lang");
    if (language)
        href += "?lang=" + language;
    location.href = href;
}

setLanguageOnLoad();
openSectionOnLoad();

document.getElementById("project-tile-asteroids").addEventListener("click", () => { openPage("asteroids.html"); });
document.getElementById("project-tile-game-of-life").addEventListener("click", () => { openPage("game-of-life.html") });
document.getElementById("project-tile-wanda").addEventListener("click", () => { openPage("wanda.html"); });
document.getElementById("project-tile-math-game").addEventListener("click", () => { openPage("math-game.html") });
document.getElementById("project-tile-mastermind").addEventListener("click", () => { openPage("mastermind.html"); });
document.getElementById("project-tile-pf-calculator").addEventListener("click", () => { openPage("pf-calculator.html"); });